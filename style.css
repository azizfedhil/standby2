const hoursElement = document.getElementById('hours');
const minutesElement = document.getElementById('minutes');
const dateElement = document.getElementById('date');
const weatherIconElement = document.getElementById('weather-icon');
const temperatureElement = document.getElementById('temperature');
const weatherDescriptionElement = document.getElementById('weather-description');

function updateTime() {
    const now = new Date();
    const hours = now.getHours().toString().padStart(2, '0');
    const minutes = now.getMinutes().toString().padStart(2, '0');
    hoursElement.textContent = hours;
    minutesElement.textContent = minutes;

    const options = { weekday: 'long', month: 'long', day: 'numeric' };
    dateElement.textContent = now.toLocaleDateString(undefined, options);
}

async function updateWeather() {
    // IMPORTANT: Replace with your own API key from a weather provider like OpenWeatherMap
    const apiKey = 'YOUR_API_KEY';
    const city = 'Cupertino'; // Change to your desired city

    // You can find your city ID to be more precise, or use q= for city name
    const apiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${apiKey}&units=metric`;

    try {
        const response = await fetch(apiUrl);
        if (!response.ok) {
            throw new Error('Weather data not available');
        }
        const data = await response.json();

        const iconCode = data.weather[0].icon;
        weatherIconElement.style.backgroundImage = `url('https://openweathermap.org/img/wn/${iconCode}@4x.png')`;
        temperatureElement.textContent = `${Math.round(data.main.temp)}Â°`;
        weatherDescriptionElement.textContent = data.weather[0].description;
    } catch (error) {
        console.error('Error fetching weather data:', error);
        weatherDescriptionElement.textContent = 'Weather Error';
    }
}

function pixelRotation() {
    let x = 0;
    let y = 0;
    const maxOffset = 4; // pixels

    setInterval(() => {
        x = Math.floor(Math.random() * (maxOffset * 2 + 1)) - maxOffset;
        y = Math.floor(Math.random() * (maxOffset * 2 + 1)) - maxOffset;
        document.body.style.transform = `translate(${x}px, ${y}px)`;
    }, 5000); // 5 seconds
}

// Initial calls
updateTime();
updateWeather();
pixelRotation();

// Update time every second
setInterval(updateTime, 1000);

// Update weather every 15 minutes (900000 milliseconds)
setInterval(updateWeather, 900000);
